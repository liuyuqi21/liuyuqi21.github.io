






<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="Cellophane">
  
  
  
  
    <meta name="description" content="路由
基本路由123Route::get('/test', function () &#123;    return '基本路由';&#125;);
带必选参数的路由1234//路由里的参数不需要和闭包里的参数同名Route::get('/test1/&#123;id&#125;', function ($id) &#123;    return "必选参数的路由$id";&#125;);
...">
  
  <title>laravel 笔记 [ Cellophane's blog ]</title>
  
  
    <link rel="shortcut icon" href="/icon.ico">
  
  
  
<link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">

  
<meta name="generator" content="Hexo 4.2.1"><link rel="stylesheet" href="/css/prism-coy.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>

<body>
<div class="side-navigate hide-area">
  
    <div class="item prev">
      <a href="/2019/02/17/RocketMQ-%E5%A4%84%E7%90%86%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        RocketMQ 处理分布式事务
      </div>
    </div>
  
  
    <div class="item next">
      <a href="/2018/10/14/jwt/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        JWT 相关设计
      </div>
    </div>
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="https://i.loli.net/2020/07/27/qrXwW2ghKUdkG9x.png"/>
          <div id="homelink">Cellophane's blog</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/index.html">Home</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">Archives</a>
            
          </li>
        
          
            <li>
          
            <a href="/tags">Tags</a>
            
          </li>
        
          
            <li>
          
            <a href="/categories">Categories</a>
            
          </li>
        
          
            <li>
          
            <a href="/about">About</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  

  <article id="post">
    <h1>laravel 笔记</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">Created at 2018-11-13</span>
      
        <span id = "post-title-updated">Updated at 2020-07-27</span>
      
      
      <span id = "post-title-categories">Category
      
      
        
        
        <a href="/categories/PHP/">PHP</a>
      
      </span>
      
      
        <span id = "post-title-tags">
          Tag
          
          
            
            
            <a href="/tags/Laravel/">Laravel</a>
          
        </span>
      
      <span id="/2018/11/13/laravel/" class="leancloud-visitors" data-flag-title="laravel 笔记">
        <i class="leancloud-visitors-count"></i>
        <em class="post-meta-item-text"> views </em>
      </span>
    </p>
    
    <h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><ul>
<li>基本路由<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'/test'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'基本路由'</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>带必选参数的路由<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由里的参数不需要和闭包里的参数同名</span></span><br><span class="line">Route::get(<span class="string">'/test1/&#123;id&#125;'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"必选参数的路由$id"</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>带可选参数的路由<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//给参数设置默认值</span></span><br><span class="line">Route::get(<span class="string">'/test1/&#123;id?&#125;'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($id = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"可选参数的路由$id"</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>参数的正则约束<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正则约束的是路由参数，跟路由参数保持一致</span></span><br><span class="line">Route::get(<span class="string">'/testrule/&#123;$id&#125;'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'参数的正则约束'</span>;</span><br><span class="line">&#125;)-&gt;where(<span class="string">'id'</span>, <span class="string">'\d+'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//多参数的正则约束</span></span><br><span class="line">Route::get(<span class="string">'/testrule/&#123;name&#125;/&#123;age&#125;'</span>, <span class="function"><span class="keyword">function</span> <span class="params">($n, $a)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)-&gt;where([<span class="string">'name'</span> =&gt; <span class="string">'w+'</span>, <span class="string">'age'</span> =&gt; <span class="string">'\d+'</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2></li>
<li><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">(User $user)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> view(<span class="string">'users.show'</span>, compact(<span class="string">'user'</span>));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
Laravel 会自动解析定义在控制器方法（变量名匹配路由片段）中的 Eloquent 模型类型声明。在上面代码中，由于 show() 方法传参时声明了类型 —— Eloquent 模型 User，对应的变量名 $user 会匹配路由片段中的 {user}，这样，Laravel 会自动注入与请求 URI 中传入的 ID 对应的用户模型实例。<br>此功能称为 『隐性路由模型绑定』，是『约定优于配置』设计范式的体现，同时满足以下两种情况，此功能即会自动启用：</li>
</ul>
<ol>
<li>路由声明时必须使用Eloquent模型的单数小写格式来作为路由片段参数</li>
<li>控制器方法传参中必须包含对应的Eloquent模型类型提示，并且是有序的</li>
</ol>
<h2 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基本响应</span></span><br><span class="line">response(<span class="string">'hello world'</span>,<span class="number">200</span>)-&gt;header(<span class="string">'content-type'</span>,<span class="string">'text/html;charset=utf8'</span>);</span><br><span class="line"><span class="comment">//设置Cookie</span></span><br><span class="line">response(<span class="string">''</span>)-&gt;withCookie(<span class="string">'name'</span>,<span class="string">'value'</span>,<span class="number">10</span>);</span><br><span class="line">dd(Cookie::get(<span class="string">'name'</span>));<span class="comment">//Cookie门面</span></span><br><span class="line"><span class="comment">//ajax</span></span><br><span class="line">response()-&gt;json([<span class="string">'name'</span>=&gt;<span class="string">'aaa'</span>]);</span><br></pre></td></tr></table></figure>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="原生sql语句"><a href="#原生sql语句" class="headerlink" title="原生sql语句"></a>原生sql语句</h3><ul>
<li>插入返回true或者false</li>
<li>查询返回一个数组，其中每个元素是一个对象</li>
<li>更新操作返回受影响行数，判断失败要用===false判断</li>
<li>删除操作返回受影响行数<h3 id="查询构造器"><a href="#查询构造器" class="headerlink" title="查询构造器"></a>查询构造器</h3></li>
<li>DB::table(‘user’)//用不带表前缀的表名</li>
<li>insert返回true或者false，insertGetId返回自增主键<h3 id="设置查询监听"><a href="#设置查询监听" class="headerlink" title="设置查询监听"></a>设置查询监听</h3></li>
<li>在Providers\AppServiceProviders.php的boot函数中添加  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">boot</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    \DB::listen(<span class="function"><span class="keyword">function</span><span class="params">($query)</span></span>&#123;</span><br><span class="line">        var_dump($query-&gt;sql);</span><br><span class="line">        var_dump($query-&gt;bindings);</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;br&gt;'</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="监听事件-观察者模式"><a href="#监听事件-观察者模式" class="headerlink" title="监听事件/观察者模式"></a>监听事件/观察者模式</h2>使用 <code>php artisan make:event</code> 事件名称，在 app/Evnent 中就会自动生成一个文件，一个事件可以被一个或多个监听器监听，也就是观察者模式，在 EventServiceProvider 中的 $listen 中可以定义时间和监听器 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">protected</span> $listen = [</span><br><span class="line">    <span class="string">'App\Events\UserLogin'</span> =&gt; [</span><br><span class="line">        <span class="string">'App\Listeners\DoSomething1'</span>,</span><br><span class="line">        <span class="string">'App\Listeners\Dosomething2'</span>,</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
执行 <code>php artisan event:generate</code>,就可以在 app/Listener 目录生成监听器。<h2 id="安装组件"><a href="#安装组件" class="headerlink" title="安装组件"></a>安装组件</h2></li>
<li>下载</li>
<li>注册到laravel中，先修改config/app.php文件中的providers，然后注册别名，修改aliases<h2 id="用户认证"><a href="#用户认证" class="headerlink" title="用户认证"></a>用户认证</h2></li>
<li>在模型里面要实现接口，App\User已经实现了所以直接继承</li>
<li>trait是实现接口的方法，在类里面可以直接use<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2></li>
<li>文件存储在storage/public里面，无法访问，所以要添加软链接 php artisan storage:link<h2 id="软删除"><a href="#软删除" class="headerlink" title="软删除"></a>软删除</h2></li>
<li>在模型里面引入SoftDeletes</li>
<li>包含trait use SoftDeletes;</li>
<li>定义属性代表软删除字段 $dates=[‘deleted_at’];</li>
</ul>
<h1 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h1><ul>
<li>$user-&gt;topics 返回的是数据集合， $user-&gt;topics()返回的是数据库查询语句。$user-&gt;topics == $user-&gt;topics()-&gt;get()。</li>
<li>使用hash_equals()比较两个字符串，无论它们是否相等，本函数的时间消耗是恒定的。本函数可以用在需要防止时序攻击的字符串比较场景中， 例如，可以用在比较 crypt() 密码哈希值的场景。</li>
<li>N+1问题</li>
<li>方法 with() 提前加载了我们后面需要用到的关联属性 user 和 category，并做了缓存。后面即使是在遍历数据时使用到这两个关联属性，数据已经被预加载并缓存，因此不会再产生多余的 SQL 查询</li>
<li>XSS 也称跨站脚本攻击 (Cross Site Scripting)，恶意攻击者往 Web 页面里插入恶意 JavaScript 代码，当用户浏览该页之时，嵌入其中 Web 里面的 JavaScript 代码会被执行，从而达到恶意攻击用户的目的。有两种方法可以避免 XSS 攻击：</li>
</ul>
<p>第一种，对用户提交的数据进行过滤；<br>第二种，Web 网页显示时对数据进行特殊处理，一般使用 htmlspecialchars() 输出</p>
<h1 id="Laravel-源码"><a href="#Laravel-源码" class="headerlink" title="Laravel 源码"></a>Laravel 源码</h1><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><ol>
<li>请求 index.php</li>
<li>注册 composer 自动加载</li>
<li>创建服务容器实例</li>
<li>通过服务容器去解析内核实例，将 HTTP 内核定义的中间件组注册到路由器</li>
<li>将 HTTP 请求实例注册到服务容器，并且通过启动引导程序来加载环境变量、全局配置、异常处理、注册门面、注册服务提供者、启动服务等，随后请求被分发到匹配的路由，在路由中执行中间件以过滤不满足校验规则的请求，只有通过中间件处理的请求才最终处理实际的控制器或匿名函数生成响应结果</li>
<li>获取到响应结果后发送给请求的客户端</li>
<li>运行程序 $kernel-&gt;terminate() 做一些善后清理工作，并最终退出脚本</li>
</ol>
<h2 id="依赖注入，控制反转"><a href="#依赖注入，控制反转" class="headerlink" title="依赖注入，控制反转"></a>依赖注入，控制反转</h2><p>依赖注入模式：不需要自己修改内容，改成由外部传递。<br>laravel 中的依赖注入用反射机制实现</p>
<h2 id="非入侵性-No-instrusive"><a href="#非入侵性-No-instrusive" class="headerlink" title="非入侵性 No instrusive"></a>非入侵性 No instrusive</h2><ul>
<li>框架的目标之一是非侵入性（No intrusive）</li>
<li>组件可以直接拿到另一个应用或框架之中使用</li>
<li>增加组件的可重用性（Reusability）</li>
</ul>
<h2 id="容器-Container"><a href="#容器-Container" class="headerlink" title="容器 Container"></a>容器 Container</h2><ul>
<li>管理对象的生成，资源取得，销毁等生命周期</li>
<li>件里对象与对象之间的依赖关系</li>
<li>启动容器后，所有对象直接取用，不用编写一行代码来产生对象，或是建立对象之间的依赖关系</li>
</ul>
<h2 id="IoC-控制反转-Inversion-of-Control"><a href="#IoC-控制反转-Inversion-of-Control" class="headerlink" title="IoC 控制反转 Inversion of Control"></a>IoC 控制反转 Inversion of Control</h2><ul>
<li>依赖关系的转移</li>
<li>依赖抽象而非实践</li>
</ul>
<h2 id="DI-依赖注入-Dependency-Injection"><a href="#DI-依赖注入-Dependency-Injection" class="headerlink" title="DI 依赖注入 Dependency Injection"></a>DI 依赖注入 Dependency Injection</h2><ul>
<li>不必自己在代码中维护对象的依赖</li>
<li>容器自动根据配置，将依赖注入指定对象<h3 id="依赖注入的三种方式"><a href="#依赖注入的三种方式" class="headerlink" title="依赖注入的三种方式"></a>依赖注入的三种方式</h3></li>
<li>Setter injection 使用setter方法</li>
<li>Constructor injection 使用构造函数</li>
<li>Property Injection 直接设置属性</li>
</ul>
<h2 id="AOP-面向切片编程-Aspect-oriented-programming"><a href="#AOP-面向切片编程-Aspect-oriented-programming" class="headerlink" title="AOP 面向切片编程 Aspect-oriented programming"></a>AOP 面向切片编程 Aspect-oriented programming</h2><ul>
<li>无需修改任何一行程序代码，将功能加入至原先的应用程序中，也可以在不修改任何程序的情况下移除。</li>
</ul>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><ul>
<li><a href="https://segmentfault.com/a/1190000002411255" target="_blank" rel="noopener">PHP程序员如何理解IoC/DI</a></li>
<li><a href="https://www.insp.top/article/learn-laravel-container" target="_blank" rel="noopener">laravel 学习笔记 —— 神奇的服务容器</a></li>
<li><a href="https://learnku.com/laravel/t/1954/on-laravel-design-pattern#3e05a8" target="_blank" rel="noopener">浅谈 Laravel 设计模式</a></li>
<li><a href="https://github.com/cxp1539/laravel-core-learn" target="_blank" rel="noopener">laravel核心知识学习</a></li>
<li><a href="https://laravelacademy.org/post/3088.html?utm_source=tuicool&utm_medium=referral" target="_blank" rel="noopener">Laravel 中管道设计模式的使用 —— 中间件实现原理探究</a></li>
<li><a href="https://www.cnblogs.com/jade640/p/6773125.html" target="_blank" rel="noopener">laravel 管道设计模式 —— 代码理解</a></li>
<li><a href="https://juejin.im/entry/591ab0a8128fe1005cded993" target="_blank" rel="noopener">Laravel 源码分析——看一次 Http 请求到响应</a></li>
</ul>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">Show TOC</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">Hide TOC</button>
  <div class="random-toc">
    <h2>Table of Content</h2>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#路由"><span class="toc-text">路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制器"><span class="toc-text">控制器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#响应"><span class="toc-text">响应</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库"><span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#原生sql语句"><span class="toc-text">原生sql语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询构造器"><span class="toc-text">查询构造器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置查询监听"><span class="toc-text">设置查询监听</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#监听事件-观察者模式"><span class="toc-text">监听事件&#x2F;观察者模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装组件"><span class="toc-text">安装组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户认证"><span class="toc-text">用户认证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件上传"><span class="toc-text">文件上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#软删除"><span class="toc-text">软删除</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#注意"><span class="toc-text">注意</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Laravel-源码"><span class="toc-text">Laravel 源码</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#生命周期"><span class="toc-text">生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#依赖注入，控制反转"><span class="toc-text">依赖注入，控制反转</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#非入侵性-No-instrusive"><span class="toc-text">非入侵性 No instrusive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#容器-Container"><span class="toc-text">容器 Container</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IoC-控制反转-Inversion-of-Control"><span class="toc-text">IoC 控制反转 Inversion of Control</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DI-依赖注入-Dependency-Injection"><span class="toc-text">DI 依赖注入 Dependency Injection</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#依赖注入的三种方式"><span class="toc-text">依赖注入的三种方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP-面向切片编程-Aspect-oriented-programming"><span class="toc-text">AOP 面向切片编程 Aspect-oriented programming</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考文章"><span class="toc-text">参考文章</span></a>
  </div>
</div>

  
  
<nav id="pagination">
  
    <a href="/2019/02/17/RocketMQ-%E5%A4%84%E7%90%86%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" class="prev">&larr; Prev post RocketMQ 处理分布式事务</a>
  

  

  
    <a href="/2018/10/14/jwt/" class="next">Next post JWT 相关设计 &rarr;</a>
  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by Cellophane using
      <a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a> & <a href="https://github.com/stiekel/hexo-theme-random" target="_blank" rel="noopener">Random</a>
      <br>
      
    </div>
  </div>
</div>

</div>


<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="https://i.loli.net/2020/07/27/qrXwW2ghKUdkG9x.png">
    <p id="description"></p>
    <ul class="social-icon">
  
  
    <li>
      <a href="https://github.com/liuyuqi21" target="_blank" rel="noopener">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
    <li>
      <a href="823458299@qq.com">
        
          M
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>




  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"preload­Image":true,"transition":["flash"],"timer":true,"delay":1500000,"shuffle":true,"count":12};
var unsplashConfig = {"gravity":"center"};
// is show background images
var turnoffBackgroundImage = false;




var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

